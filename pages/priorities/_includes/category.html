{% assign now = "now" | date: "%s" | plus: 0 %}
{% assign last_updated_duration = include.last_updated_duration | default: 0 %}
{% assign enable_recent_update = include.enable_recent_update %}

<div id="{{ include.id }}" class="category level-{{ include.level }}">
	<div class="container">
		<details class="category-details" open>
			<summary class="category-summary">
				<a class="category-anchor" href="#{{ include.id }}">
					<span class="material-symbols-outlined">link</span>
				</a>
				{% assign header_number = include.level | to_i | plus: 1 %}
				{% assign header_tag = "h" | append: header_number %}
				<{{ header_tag }} class="category-title">
					<div class="category-title-text">{{ include.name }}</div>
					{% assign is_recent = false %}
					{% for element in include.elements %}
						{% if element.last_updated != "" %}
							{% assign last_updated = element.last_updated | date: "%s" | plus: 0 %}
							{% if last_updated > (now | minus: last_updated_duration) %}
								{% assign is_recent = true %}
								{% break %}
							{% endif %}
						{% endif %}
					{% endfor %}
					{% if is_recent and enable_recent_update %}
						<div class="recent-icon"></div>
					{% endif %}
				</{{ header_tag }}>
				<div class="category-accordion-toggle">
					<span class="material-symbols-outlined more">unfold_more</span>
					<span class="material-symbols-outlined less">unfold_less</span>
				</div>
			</summary>
			<div class="category-content">
				<ul class="element-list">
					{% for element in include.elements %}
						<li class="element-list-item">
							{%
								include_relative _includes/element.html
								element=element
								last_updated_duration=last_updated_duration
								enable_recent_update=enable_recent_update
							%}
						</li>
					{% endfor %}
				</ul>
			</div>
		</details>
	</div>
</div>
